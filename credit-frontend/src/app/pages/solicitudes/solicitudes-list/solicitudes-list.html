<div class="container mt-4">
  <h2 class="mb-3 text-primary text-center">
    <i class="bi bi-list-check"></i> Lista de Solicitudes
  </h2>

  <!-- Barra de acciones -->
  <div class="d-flex justify-content-between mb-3">
    <div class="input-group w-50">
      <span class="input-group-text bg-light"><i class="bi bi-search"></i></span>
      <input type="text" class="form-control" [(ngModel)]="filtro" placeholder="Buscar por cliente o estatus" />
    </div>

    <div>
      <button class="btn btn-success me-2" (click)="exportarExcel()">
        <i class="bi bi-file-earmark-excel"></i> Excel
      </button>
      <button class="btn btn-danger" (click)="exportarPDF()">
        <i class="bi bi-file-earmark-pdf"></i> PDF
      </button>
    </div>
  </div>

  <!-- Tabla -->
  <div class="table-responsive shadow-sm rounded">
    <table class="table table-striped table-hover align-middle">
      <thead class="table-primary">
        <tr>
          <th>#</th>
          <th>Cliente</th>
          <th>Fecha</th>
          <th>Monto</th>
          <th>Plazo</th>
          <th>Ingresos</th>
          <th>Decisi√≥n</th>
        </tr>
      </thead>
      <tbody>
        @for (s of solicitudesFiltradas; track $index ) {
        <tr>
          <td>{{ $index + 1 }}</td>
          <td>{{ s.clienteNombre }}</td>
          <td>{{ s.fecha | date:'dd/MM/yyyy HH:mm' }}</td>
          <td>{{ s.monto | currency:'MXN' }}</td>
          <td>{{ s.plazoMeses }} meses</td>
          <td>{{ s.ingresosMensuales | currency:'MXN' }}</td>
          <td>
            <span
              class="badge"
              [ngClass]="{
                'bg-success': s.estado === 'APROBADO',
                'bg-danger': s.estado === 'RECHAZADO'
              }"
            >
              {{ s.estado }}
            </span>
          </td>
        </tr>
      }

        <tr *ngIf="solicitudes.length === 0">
          <td colspan="7" class="text-center text-muted py-4">
            <i class="bi bi-exclamation-circle"></i> No hay solicitudes registradas
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
